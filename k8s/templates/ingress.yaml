# apiVersion: networking.k8s.io/v1
# kind: Ingress
# metadata:
#   name: gbr-ingress
#   annotations:
#     alb.ingress.kubernetes.io/scheme: internet-facing
#     alb.ingress.kubernetes.io/target-type: ip
# spec:
#   ingressClassName: alb
#   rules:
#   - http:
#       {{- range .Values.gbrInstances }}
#       paths:
#       - path: /{{ .port }}
#         pathType: Prefix
#         backend:
#           service:
#             name: gbr-service-{{ .port }}
#             port:
#               number: {{ .port }}
#       {{- end }}
# apiVersion: v1
# kind: Service
# metadata:
#   name: gbr-lb
#   labels:
#     app: gbr
# spec:
#   type: LoadBalancer
#   selector:
#     app: gbr
#   # {{- range .Values.gbrInstances }}
#   # ports:
#   #   - protocol: TCP
#   #     port: {{ .port }}
#   #     targetPort: {{ .port }}
#   # {{- end }}
#   ports:
#     {{- range .Values.gbrInstances }}
#     - name: p{{ .id }}
#       protocol: TCP
#       port: 9222
#       targetPort: {{ .id }}
#     {{- end }}
